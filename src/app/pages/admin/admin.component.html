<div class="container my-4">
  <!-- Cards -->
  <div class="d-flex justify-content-around flex-wrap">
    <div class="app-button" routerLink="/admin/customers">
      
      <h1> 
        <button mat-mini-fab disabled class="mr-3"><mat-icon class="material-icons-outlined">people</mat-icon></button> 
        Clientes 
      </h1>
    </div>
    <div class="app-button" routerLink="employees">
      
      <h1>
        <button mat-mini-fab disabled class="mr-3"><mat-icon class="material-icons-outlined">work_outline</mat-icon></button>
        Empleados
      </h1>
    </div>
    <div class="app-button" routerLink="invoices">
      <h1> 
        <button mat-mini-fab disabled class="mr-3"><mat-icon class="material-icons-outlined">receipt</mat-icon></button>
        Facturas 
      </h1>
    </div>
  </div>
  <!-- Ingresos -->
  <div class="mt-3 app-card" style="height: auto; width: 100%; box-sizing: border-box; padding: 10px;">
    
    <div class="container">
      <div class="row">
        <h1>Ingresos por periodo</h1> 
        <div>
          <form [formGroup]="datesForm">
            <mat-form-field>
              <input matInput placeholder="Elige las fechas" [satDatepicker]="picker" formControlName="date" (dateChange)="getIngresos()">
              <sat-datepicker #picker [rangeMode]="true"></sat-datepicker>
              <sat-datepicker-toggle matSuffix [for]="picker"></sat-datepicker-toggle>
            </mat-form-field>
            <button mat-button mat-icon-button matTooltip="Descargar" (click)="onDownloadData(ingresos, 'Ingresos')">
              <mat-icon class="material-icons app-menu-icon">vertical_align_bottom</mat-icon>
            </button>
          </form>
        </div>
      </div>
    </div>

    <div style="height: 200px; width: 100%;">
      <ngx-charts-number-card [results]="ingresos" [scheme]="ingresosColorScheme" [valueFormatting]="format"
      [innerPadding]="0" [cardColor]="'#f2f2f2'">
      </ngx-charts-number-card>
    </div>
  </div>

  <!-- Stock -->
  <div class="mt-5 app-card" style="height: auto; width: 100%; box-sizing: border-box; padding: 10px;">
    <div class="container">
      <div class="row">
        <h1 class="mt-3 mb-3">Productos por debajo del stock mínimo</h1>
        <button mat-button mat-icon-button matTooltip="Descargar" (click)="onDownloadData(stock, 'Productos con bajo stock')">
          <mat-icon class="material-icons-outlined">vertical_align_bottom</mat-icon>
        </button>
      </div>
    </div>
    
    <div style="height: 350px; width: 99%;" *ngIf="stockLength > 0; else stockSuficiente">
      <ngx-charts-bar-vertical [results]="stock" [scheme]="'fire'" [yAxis]="'true'" [legend]="'true'" (select)="onSelect($event)">
      </ngx-charts-bar-vertical>
    </div>
    <ng-template #stockSuficiente>Todos los productos tienen stock suficiente</ng-template>
  </div>

  <!-- Insumos más vendidos -->
  <div class="mt-3 app-card" style="height: auto; width: 100%; box-sizing: border-box; padding: 10px;">
    <div class="container">
      <div class="row">
        <h1>Insumos más vendidos</h1> 
        <div>
          <form [formGroup]="datesForm">
            <mat-form-field>
              <input matInput placeholder="Elige las fechas" [satDatepicker]="picker2" formControlName="date" (dateChange)="getTopInsumos()">
              <sat-datepicker #picker2 [rangeMode]="true"></sat-datepicker>
              <sat-datepicker-toggle matSuffix [for]="picker2"></sat-datepicker-toggle>
            </mat-form-field>
            <button mat-button mat-icon-button matTooltip="Descargar" (click)="onDownloadData(insumosMasVendidos, 'Insumos mas vendidos')">
              <mat-icon class="material-icons app-menu-icon">vertical_align_bottom</mat-icon>
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="pie-chart" *ngIf="insumosLength > 0; else sinDatos">
      <ngx-charts-advanced-pie-chart [results]="insumosMasVendidos" [scheme]="masVendidosColorScheme" (select)="onSelect($event)">
      </ngx-charts-advanced-pie-chart>
    </div>
    
  </div>

  <!-- Manufacturados más vendidos -->
  <div class="mt-3 app-card" style="height: auto; width: 100%; box-sizing: border-box; padding: 10px;">
    <div class="container">
      <div class="row">
        <h1>Manufacturados más vendidos</h1> 
        <div>
          <form [formGroup]="datesForm">
            <mat-form-field>
              <input matInput placeholder="Elige las fechas" [satDatepicker]="picker3" formControlName="date" (dateChange)="getTopManufacturados()">
              <sat-datepicker #picker3 [rangeMode]="true"></sat-datepicker>
              <sat-datepicker-toggle matSuffix [for]="picker3"></sat-datepicker-toggle>
            </mat-form-field>
            <button mat-button mat-icon-button matTooltip="Descargar" (click)="onDownloadData(manufacturadosMasVendidos, 'Manufacturados mas vendidos')">
              <mat-icon class="material-icons app-menu-icon">vertical_align_bottom</mat-icon>
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="pie-chart" *ngIf="manufacturadosLength > 0; else sinDatos">
      <ngx-charts-advanced-pie-chart [results]="manufacturadosMasVendidos" [scheme]="masVendidosColorScheme" (select)="onSelect($event)">
      </ngx-charts-advanced-pie-chart>
    </div>
    
  </div>

  <ng-template #sinDatos>
    <div class="empty-state">
      No hay datos para el periodo indicado
    </div>
  </ng-template>
  
</div>
